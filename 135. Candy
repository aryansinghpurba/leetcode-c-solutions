int candy(int* ratings, int ratingsSize) {
    int total=0;
    int* candie=(int*)malloc(sizeof(int)*ratingsSize);

    for(int i=0;i<ratingsSize;i++)
    candie[i]=1;
    for(int i=1;i<ratingsSize;i++){
        if(ratings[i]>ratings[i-1])
        candie[i]=candie[i-1]+1;
    }
    for(int i=ratingsSize-2; i>=0;i--){
        if((ratings[i]>ratings[i+1])&&candie[i]<=candie[i+1])
        candie[i]=candie[i+1]+1;
    }
    for(int i=0;i<ratingsSize;i++)
    total+=candie[i];
    free(candie);
    return total;
}
